<main class="invoice">
  <h1>Créer une facture de taxe de séjour pour meublé de tourisme</h1>
  <section class="calcul">
    <%= simple_form_for :taxe_sejour, :url => taxe_facture_path, :method => :post do |f| %>
      <%= f.input :town, collection: [ "Niederbronn", "Morsbronn" ], selected: "Niederbronn", required: false, label: "Communauté de commune" %>
      <%= f.input :rating, :input_html => { :type => "string" }, collection: [ "non classé", "1", "2", "3", "4", "5" ], selected: "Niederbronn", required: false, label: "Classement en étoile" %>
      <%= f.input :amount, :input_html => { :type => "number" }, label: "Montant total du séjour :", :required => false %>
      <%= f.input :days, :input_html => { :type => "number" }, label: "Durée du séjour :", :required => false %>
      <%= f.input :people, :input_html => { :type => "number" }, label: "Total personnes :", :required => false %>
      <%= f.input :minors, :input_html => { :type => "number" }, label: "Pers. non assujetties (ex: mineurs) :", :required => false %>
      <%= f.button :submit, value: "Calculer" %>
      <h2>Formulaire de facturation pour taxe de séjour | 2019</h2>
    <% end  %>
  </section>

  <% if @taxe != "0.0" && !@taxe.nil? %>

  <section id="taxe-invoice">
    <div id="facture">
      <h2>Facture</h2>
      <div class="details">
        <div>
          <p>Montant du séjour :</p><p><%= @amount.to_f %> €</p>
        </div>
        <div>
          <p>Nombre de nuitées :</p><p><%= @days %></p>
        </div>
        <div>
          <p>Total de personnes :</p><p><%= @people %></p>
        </div>
        <div>
          <p>Nombre de pers. exonérées (ex: pers. mineures) :</p><p><%= @people.to_i - @minors.to_i %></p>
        </div>
        <div>
          <p>Taxe par personne (dont taxe dep. de 10%) :</p><p><%= @single_tax %> €</p>
        </div>
        <div>
          <p>Détail du calcul : <%= @single_tax %> (taxe par pers. dont taxe add.) x <%= @people.to_i - @minors.to_i %> (pers. assujetties) x <%= @days %> (jours)</p>
        </div>
        <div class="amount-taxe">
          <p>Montant total de la taxe de séjour à verser :</p><p><b><%= @taxe.to_f %> €</b></p>
        </div>
        <%= link_to 'Imprimer', 'your_link_here', :onclick => 'window.print();return false;', class: '' %>
      </div>
    </div>
  </section>
  <% else %>
  <% end %>
</main>
